<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Truck Owner</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* style.css might already have this, but for clarity */
    .edit-mode input {
      width: 100%;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Add Truck Owner</h1>
  </div>
  <div class="page-container">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash flash-{{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}
    <a class="back-link" href="{{ url_for('dashboard') }}">‚Üê Back to Dashboard</a>

    <div class="form-card">
      <h3>Add New Truck Owner</h3>
        <form method="POST">
          <div class="form-row">
            <div>
              <label for="truck_number">Truck Number</label>
              <input type="text" name="truck_number" id="truck_number" required>
            </div>
            <div>
              <label for="truck_owner">Truck Owner Name</label>
              <input type="text" name="truck_owner" id="truck_owner" required>
            </div>
            <div>
              <label for="phone_number">Phone Number</label>
              <input type="text" name="phone_number" id="phone_number" required>
            </div>
            <div>
              <button type="submit">‚ûï Add</button>
            </div>
          </div>
        </form>

    </div>
    <div class="table-card">
        <h3>All Truck Owners</h3>
          <form method="GET" action="{{ url_for('add_truck_owner') }}" class="search-form">
            <input type="text" name="query" id="searchInput" class="search-input" placeholder="üîç Search by truck number, owner or phone..." value="{{ request.args.get('query', '') }}">
            <button type="submit">Search</button>
          </form>
        <table>
          <thead>
            <tr>
              <th>Truck Number</th>
              <th>Truck Owner</th>
              <th>Phone Number</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="truckTable">
            {% for row in truck_owners %}
            <tr data-truck-num="{{ row.truck_number }}">
              <td data-field="truck_num">{{ row.truck_number }}</td>
              <td data-field="owner_name">{{ row.truck_owner }}</td>
              <td data-field="phone">{{ row.phone_number }}</td>
              <td class="actions-cell">
                <button type="button" class="edit-btn">
                  Edit
                </button>
                <button type="button" class="delete-btn">
                  Delete
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
          <div class="pagination">
        {% if page > 1 %}
          <a href="{{ url_for('add_truck_owner', page=page-1) }}">‚¨Ö Previous</a>
        {% endif %}

        <span>Page {{ page }} of {{ total_pages }}</span>

        {% if page < total_pages %}
          <a href="{{ url_for('add_truck_owner', page=page+1) }}">Next ‚û°</a>
        {% endif %}
      </div>
    </div>
  </div>
  <script src="{{ url_for('static', filename='scripts/add_truck_owner.js') }}"></script>
</body>
</html>